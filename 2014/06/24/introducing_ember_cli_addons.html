<!DOCTYPE html><html><head><title>Introducing Ember CLI Addons</title><link href="/stylesheets/all-84f1eb0e.css" media="screen" rel="stylesheet" type="text/css" /><script src="/javascripts/all-ce68a29a.js" type="text/javascript"></script><meta content='NO-CACHE' http-equiv='CACHE-CONTROL'><meta content='DockYard is a Ruby on Rails, PostgreSQL, and, Ember.js, web / mobile application development software consultancy based in Boston, MA.' namer='description'><meta content='ruby on rails, rails, ruby, ruby on rails training, ruby application development, ruby on rails application development, ember application development, ember.js application development, software application development, web, web application development, mobile, mobile application development, ios, ios application development, iphone, iphone application development, android, android application development, postgres, startups, enterprise, Boston, MA, Massachusetts, for hire' name='keywords'><meta content='web development, mobile development, startups, enterprise, ruby on rails, rails, ruby, ruby on rails training, Boston, for hire' name='keywords'><meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0' name='viewport'><meta charset='utf-8'><meta content='DockYard.com - ' name='description'><meta content='rwjblue' name='twitter:creator'><meta content='summary' name='twitter:card'><meta content='@DockYard' name='twitter:site'><meta content='http://reefpoints.dockyard.com/2014/06/24/introducing_ember_cli_addons.html' name='twitter:url'><meta content='Introducing Ember CLI Addons' name='twitter:title'><meta name='twitter:description'><link href='//cloud.typography.com/6496052/702882/css/fonts.css' rel='stylesheet' type='text/css'><link href='http://dockyard.com/humans.txt' rel='author'><link href='/favicon-573a5e34.png' rel='shortcut icon' type='image/x-icon'><link href='/favicon-573a5e34.png' rel='icon' type='image/x-icon'><link href='/apple-touch-icon.png' rel='apple-touch-icon'><link href='/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'><link href='/atom.xml' rel='alternate' title='DockYard - Reefpoints' type='application/atom+xml'><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-24185112-2']);
    _gaq.push(['_trackPageview']);
  
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!--
                                             ..
                                           .O.
                                       .:OO.
                                      :OOO.
                                    :OOO:.
                         ...      :OOOO:
                   ..ZOOOOOOOOO..OZ.O.
                   OOOOOOOOOOOOOOOOI
                  OOOOOOOOOOOOOOOOI,
                 OOOOOOOO. .OOOOOOOO:
                 OOOOOOOO   OOOOOOOOO:
                OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO:
               .OOOOOOOOOOOOOOOOOOOOO.
                OOOOOOOOOOOOOOOOOOOOO
                OOOOOO?:   .OOOOOOOOO
               .OOOOO      OOOOOOOOOO
,OO ZO,        OOOOO,     OOOOOOOOOO+
 OOOOO.        OOOOO     OOOOOOOOOOO+
  OOO?        OOOOO     .OOOOOOOOOOO:
   OOO,      OOOOO.    .OOOOOOOOOOOO
    OOOOOOOOOOOOO.    .OOOOOOOOOOOO.
     OOOOOOOOOOOO.  .OOOOOOOOOOOOO.
      8OOOOOOOOOOOOOOOOOOOOOOOODO:
         :OOOOOOOOOOOOOOOOOOOO::

--></head><body class='x2014 x2014_06 x2014_06_24 x2014_06_24_introducing_ember_cli_addons'><header><div class='extended-nav-wrap'><div class='l-wrap--wide'><nav class='extended-nav'><a class="extended-nav--logo" data-icon="⌂" href="http://dockyard.com/"><span class='is-hidden'>Home</span></a>
<a class="extended-nav--close" data-icon="X" href="#"><span class='is-hidden'>Close</span></a><div class='extended-nav__items'><div class='extended-nav__items--mobile'><a class="extended-nav__item--work extended-nav__item" href="#">Work</a><nav class='work-nav--mobile'><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong></a>
<a href="http://dockyard.com/work/scratch" class="work-nav-item"><strong class='work-nav-item__title'>Scratch Wireless</strong></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong></a></nav></div><a class="extended-nav__item" href="http://dockyard.com/team">Our Team</a><a class="extended-nav__item" href="http://dockyard.com/process">Process</a><a class="extended-nav__item" href="http://dockyard.com/community">Community</a><a class="extended-nav__item active" href="/">Blog</a><a class="extended-nav__item" href="http://dockyard.com/hire-us">Hire Us</a></div></nav><nav class='work-nav'><h6>Selected Work</h6><a href="http://dockyard.com/work/credit-card-reviews" class="work-nav-item"><strong class='work-nav-item__title'>Credit Card Reviews</strong><p>Credit card advice from real people.</p></a>
<a href="http://dockyard.com/work/scratch" class="work-nav-item"><strong class='work-nav-item__title'>Scratch Wireless</strong><p>Never pay another penny for smartphone service.</p></a>
<a href="http://dockyard.com/work/coachup" class="work-nav-item"><strong class='work-nav-item__title'>CoachUp</strong><p>You should be training. Right now.</p></a>
<a href="http://dockyard.com/work/askthem" class="work-nav-item"><strong class='work-nav-item__title'>AskThem</strong><p>Ask officials questions on city, state, and federal levels.</p></a>
<a href="http://dockyard.com/work/beacon-hill-blitz" class="work-nav-item"><strong class='work-nav-item__title'>Beacon Hill Blitz</strong><p>How technology helped repeal the #TechTax.</p></a></nav></div></div><nav class='main-nav-wrap'><div class='main-nav l-wrap--wide'><a class="logo" href="http://dockyard.com">DockYard</a><a class="club-sandwich" data-icon="☰" href="#"><span class='is-hidden'>Navigation</span></a></div></nav></header><div class='push--header'></div><div class='l-wrap--blog'><a href="/"><strong class='logo--blog'>ReefPoints</strong><strong class='logo--blog__tagline'>Blog</strong></a><nav class='blog-nav'><a class="blog-nav__item " href="/">Posts</a><a class="blog-nav__item " href="/categories.html">Categories</a><a class="blog-nav__item " href="/authors.html">Authors</a></nav></div><div class='l-wrap--blog__post'><h1 class='post__title'>Introducing Ember CLI Addons</h1><a class="post__author" href="/authors/robert-jackson.html">Robert Jackson</a><time class='post__date'>June 24<sup>th</sup>, 2014</time><div class='post__content'><p>Distribution of reusable Ember.js libraries has been a pain point for quite a while. During application development we have frequently wished for a silver bullet for the sharing of concepts/code from one project to another.</p>

<p><a href="https://github.com/stefanpenner/ember-cli">Ember CLI</a> has given us the opportunity to set the conventions for sharing that we have been searching for.</p>

<p>Over the last few weeks we have been focusing our efforts on the Ember CLI Addon story, and current support the following scenarios out of the box:</p>

<ul>
<li><p>Performing operations on the <code>EmberApp</code> created in the consuming applications <code>Brocfile.js</code>. The most common things this would be used to call <code>app.import</code> (see <a href="http://iamstef.net/ember-cli/#managing-dependencies">Ember CLI - Managing Dependencies</a> for more details) or process the various options provided by the consuming application. Examples: <a href="https://github.com/rwjblue/ember-cli-pretender">ember-cli-pretender</a>, <a href="https://github.com/firebase/emberFire">emberFire</a>, and <a href="https://github.com/rwjblue/ember-cli-ic-ajax">ember-cli-ic-ajax</a></p></li>
<li><p>Adding preprocessors to the default registry. This allows us to use a custom preprocessor to handle our templates, JavaScript, and/or styles. Example: <a href="https://github.com/rwjblue/ember-cli-esnext">ember-cli-esnext</a></p></li>
<li><p>Providing a custom application tree to be merged with the consuming application. This allows you to distribute anything that might need to be imported in the consuming application; including components, templates, routes, mixins, helpers, etc. Example: <a href="https://github.com/rondale-sc/ember-cli-super-number">ember-cli-super-number</a></p></li>
<li><p>Providing custom express middlewares. This allows for an addon to completely customize the development servers behaviors, making things like automated mock Ember Data API&#39;s actually possible. This is currently only available on master (will be available in  0.0.37 and higher).</p></li>
</ul>

<p>One of the design goals that the current crop of example addons follow is that they can all be installed and used simply via:</p>
<div class="highlight bash "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>npm install --save-dev &lt;package name&gt;
</pre></td>
</tr></table>
</div></div>
<h2>Details</h2>

<h3>Discovery</h3>

<p>Ember CLI detects the presence of an addon by inspecting each of your applications dependencies and searching their <code>package.json</code> files for the presence of <code>ember-addon</code> in the keywords section. </p>

<h3>Creation</h3>

<p>Once the available addons are detected, Ember CLI will require the addon.  By default it will use standard Node.js require rules (see <a href="http://nodejs.org/api/modules.html#modules_all_together">here</a> for a breakdown), but you can provide a custom entry point by specifying a <code>ember-addon-main</code> property in your <code>package.json</code>.</p>

<p>Either way you go, during the various commands that cause a new build to be done (<code>ember server</code>, <code>ember test</code>, <code>ember build</code>, etc) Ember CLI will create a new instance of the class that your addon returns passing it the <code>Project</code> instance for the current project. The <code>Project</code> model has a few functions that might be useful to your addon. You can see a full list by inspecting the <a href="https://github.com/stefanpenner/ember-cli/blob/master/lib/models/project.js">source</a>, but to name a few:</p>

<ul>
<li><code>require</code> -- Lets you require files or packages from the consuming application.</li>
<li><code>config</code> -- Returns the configuration for the provided environment.</li>
<li><code>resolve</code> -- Looks up a file from the root of the project using standard Node require semantics, but with the projects root as the base directory.</li>
</ul>

<h3>Build Process Inclusion</h3>

<p>When the consuming application&#39;s <code>Brocfile.js</code> is processed by Ember CLI to build/serve/etc the addon&#39;s <code>included</code> function is called passing the <code>EmberApp</code> instance. You can use this to access the options provided (for configuration of your addon for example).</p>

<h3>Intra Build Hooks</h3>

<p>There are a few other points in the build process that your addon can hook into via the <code>treeFor</code> function. <code>treeFor</code> is called to setup the final build output for a few specific points in the build process. The addons <code>treeFor</code> function will be called with an argument that signifies which tree is being asked for.</p>

<p>Currently, the following trees can be customized by the addon:</p>

<ul>
<li><code>app</code> -- The tree returned by your addon for the <code>app</code> tree will be merged with that of the application. This is an excellent place to add custom initializers for your addon, add routes/controllers/views/components/templates/etc (anything that goes in <code>app/</code> really). For additional information read through the <a href="http://hashrocket.com/blog/posts/building-ember-addons">blog post</a> describing how <code>ember-cli-super-number</code> was turned into an addon.</li>
<li><code>styles</code> -- The tree returned by your addon for the <code>styles</code> tree will be merged with your applications styles (generally <code>app/styles/</code>).</li>
<li><code>vendor</code> -- The tree returned by your addon for the <code>vendor</code> tree will be merged with your applications vendor tree (generally <code>vendor/</code>). </li>
</ul>

<p>All of the trees returned by addons are merged into the corresponding tree in the application. The application&#39;s direct trees are always last so they will always override any files from an addon. This actually makes a wonderful place for application specific customization: your addon could provide a good default template, and the application can override by simply placing their own template in the same path.</p>

<h2>Future</h2>

<p>Many things are still planned for the &quot;Addon Story&quot; in Ember CLI. A few of them below:</p>

<ul>
<li>Allow addons to specify preferred ordering (before or after another addon). Similar in concept (and stolen from) the Ember initializer ordering. This is implemented on master and will be included in 0.0.37.</li>
<li>Allow addons to provide a <code>blueprintPaths</code> function that will return addition paths for blueprints to be looked up. This will allow an addon to override internal blueprints or add their own.</li>
<li>Allow more than one preprocessor to be used at once. Currently, it is only possible to have a single preprocessor, but this is a limitation if you want both SCSS and plain CSS (for example).</li>
<li>Expose post-processed stages. This will allow for better customization of the final output which things like <a href="https://github.com/ai/autoprefixer">autoprefixer</a> would be able to take advantage of.</li>
</ul>

<h2>Call To Arms</h2>

<p>This API is still very fluid and not set in stone. We need as much feedback as possible to truly solidify things.</p>
</div><div class='post__share'><a class='twitter-share-button' data-url='http://reefpoints.dockyard.com/2014/06/24/introducing_ember_cli_addons.html' data-via='DockYard' href='https://twitter.com/share'>Tweet</a><script>
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');
</script><div class='g-plusone' data-href='#' data-size='medium' data-width='100'></div><script>
  (function() {var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;po.src = 'https://apis.google.com/js/plusone.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);})();
</script><span class='post__share--github'>If you see an issue, please send a <a href='https://github.com/dockyard/reefpoints/blob/master/source/posts/', class='text-link post__issue', target: '_blank'>pull request</a> to contribute.</span></div><div class='related-posts-wrap'><div class='post__avatar-wrap'><img class='post__avatar' src='/images/team/robert-jackson.jpg'><h5 class='post__avatar__name'>Robert Jackson</h5><h5 class='post__avatar__position headline--sub'>Developer At DockYard
</h5><nav class='post__avatar__social-links'><a target="_blank" class="post__avatar__social-link--twitter" data-icon="#" href="http://twitter.com/rwjblue">rwjblue</a><a target="_blank" class="post__avatar__social-link--github" data-icon="★" href="https://github.com/rwjblue">rwjblue</a></nav></div><div class='related-posts'><h3 class='related-posts__header headline--sub'>Other posts by Robert</h3><a class="related-post" href="/2015/02/06/ember-qunit-0-2.html"><h2 class='related-post__title'>Ember QUnit 0.2.x</h2><p>February 6<sup>th</sup>, 2015</p></a>
<a class="related-post" href="/2015/02/02/debugging-a-broccoli-tree.html"><h2 class='related-post__title'>Debugging a Broccoli Tree</h2><p>February 2<sup>nd</sup>, 2015</p></a>
<a class="related-posts-link text-link" href="/authors/robert-jackson.html">See all 4 posts by Robert</a></div></div><p class='post__tags'><a class="post__tag" href="/categories/ember.html">Ember.js&nbsp;<span class='post__tag__count'>(44)</span></a> <a class="post__tag" href="/categories/ember-cli.html">Ember-cli&nbsp;<span class='post__tag__count'>(3)</span></a></p><div id='disqus_thread'></div><script>
  var disqus_shortname = 'reefpoints';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script><noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus</a>.</noscript></noscript><script>
  var path = window.location.pathname.split('/').reverse();
  var postname = path[0].split('.');
  var change = postname[0] + '.md';
  var newpath = 'https://github.com/dockyard/reefpoints/blob/master/source/posts/' + path[3] + '-' + path[2] + '-' + path[1] + '-' + change
  $('.post__issue').attr('href', newpath);
</script></div><div class='push--footer'></div><footer><div class='l-wrap'><div class='l-footer-group'><h3 class='footer-group__title'>EVENTS</h3><a class="footer__event--wgc" target="_blank" href="http://wickedgoodember.com/">Wicked Good Ember Conf</a><a class="footer__event--ember" target="_blank" href="http://www.meetup.com/Boston-Ember-js/">Boston Ember.js Meetup</a><a class="footer__event--openhack" target="_blank" href="http://openhack.github.io/boston/">OpenHack Boston</a><a class="footer__event--ux" target="_blank" href="http://www.meetup.com/uxboston/">UX Boston Meetup</a><a class="footer__event--swift" target="_blank" href="http://www.meetup.com/Boston-Swift/">Boston Swift</a><a class="footer__event--uxhh" target="_blank" href="http://www.uxhappyhour.com/bos">UX Happy Hour</a></div><div class='l-footer-group'><a href="/"><h3 class='footer-group__title'>BLOG</h3></a>
<a class="footer__post" href="/2015/07/27/an-existential-redesign.html"><strong>An Existential Redesign</strong><h6 class='footer-desc'>Reflections on the experience of creating the new DockYard</h6></a>
<a class="footer__post" href="/2015/07/24/using-bare-arguments-with-ember-components.html"><strong>Using bare arguments with Ember components</strong><h6 class='footer-desc'>Positional parameters help you create cleaner APIs for your components</h6></a>
<a class="footer__post" href="/2015/07/15/color-and-culture.html"><strong>Color and culture</strong><h6 class='footer-desc'>Part 2 of 4 in the UX color series</h6></a></div><div class='l-footer-group'><a href="http://dockyard.com/hire-us"><h3 class='footer-group__title'>CONTACT</h3></a><h6 class='footer-desc'>DockYard HQ is located in Boston. Stop in sometime and meet our team!</h6><a class="footer__address" target="_blank" href="http://goo.gl/maps/zBGfn"><h6>DockYard Inc.<br>294 Washington St<br>Suite 1150<br>Boston, MA 02108</h6></a>
<a class="text-link" href="http://dockyard.com/hire-us">Get in touch.</a><div class='social-links--footer'><a target="_blank" data-icon="#" class="social-link" href="https://twitter.com/dockyard"><span class='is-hidden'>Twitter</span></a>
<a target="_blank" data-icon="★" class="social-link" href="https://github.com/dockyard"><span class='is-hidden'>GitHub</span></a>
<a target="_blank" data-icon="✒" class="social-link" href="/atom.xml"><span class='is-hidden'>RSS</span></a></div></div></div></footer><script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'reefpoints'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script></body></html>
